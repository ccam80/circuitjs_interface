{
  "permissions": {
    "allow": [
      "Bash(python -m venv:*)",
      "Bash(\"./.venv/Scripts/python.exe\" -m pip install --upgrade pip)",
      "Bash(\"C:/local_working_projects/falstad_stack_integration/.venv/Scripts/python.exe\" -m pip install PyQt6)",
      "Bash(\"C:/local_working_projects/falstad_stack_integration/.venv/Scripts/python.exe\" -c:*)",
      "Bash(\"C:/local_working_projects/falstad_stack_integration/.venv/Scripts/python.exe\" -c \"\nfrom PyQt6.QtWebEngineWidgets import QWebEngineView\nprint\\(''QWebEngineView import: OK''\\)\nprint\\(f''Class: {QWebEngineView}''\\)\n\")",
      "Bash(\"C:/local_working_projects/falstad_stack_integration/.venv/Scripts/python.exe\" -c \"\n# Test import order - WebEngine before offscreen QApplication\ntry:\n    from PyQt6.QtWebEngineWidgets import QWebEngineView\n    print\\(''WebEngine import succeeded BEFORE QApplication''\\)\nexcept Exception as e:\n    print\\(f''WebEngine import failed: {e}''\\)\nimport os\nos.environ[''QT_QPA_PLATFORM''] = ''offscreen''\nfrom PyQt6.QtWidgets import QApplication\napp = QApplication\\([]\\)\ntry:\n    from PyQt6.QtWebEngineWidgets import QWebEngineView\n    print\\(''WebEngine import succeeded AFTER offscreen QApplication''\\)\nexcept Exception as e:\n    print\\(f''WebEngine import failed after app: {e}''\\)\n\")",
      "Bash(\"C:/local_working_projects/falstad_stack_integration/.venv/Scripts/python.exe\" -m py_compile \"C:/local_working_projects/falstad_stack_integration/tools/question_generator.py\")",
      "Bash(\"./.venv/Scripts/python.exe\" -c \"import py_compile; py_compile.compile\\(''tools/question_generator.py'', doraise=True\\); print\\(''OK''\\)\")",
      "Bash(\"./.venv/Scripts/python.exe\" -c \"\nfrom dataclasses import dataclass, asdict\nimport json\n\n@dataclass\nclass Measurement:\n    label: str\n    property: str\n    target: float\n    tolerance: float\n    graded: bool\n\nm = Measurement\\(''vout'', ''nodeVoltage'', 3.3, 0.1, True\\)\nprint\\(json.dumps\\(asdict\\(m\\)\\)\\)\nprint\\(''data_key:'', m.label if m.property == ''nodeVoltage'' else f''{m.label}:{m.property}''\\)\n\nm2 = Measurement\\(''R1'', ''current'', 0.003, 0.0005, True\\)\nprint\\(json.dumps\\(asdict\\(m2\\)\\)\\)\nprint\\(''data_key:'', m2.label if m2.property == ''nodeVoltage'' else f''{m2.label}:{m2.property}''\\)\nprint\\(''OK''\\)\n\")",
      "Bash(grep:*)",
      "Bash(xargs -I {} sh -c 'echo \"\"=== {} ===\"\" && head -15 \"\"{}\"\"')",
      "Bash(find:*)",
      "Bash(\".venv/Scripts/python.exe\" -m uv pip install lzstring)",
      "Bash(\".venv/Scripts/python.exe\" -m pip install lzstring)",
      "Bash(\".venv/Scripts/python.exe\":*)",
      "Bash(\".venv/Scripts/python.exe\" -c \"import py_compile; py_compile.compile\\(''tools/question_generator.py'', doraise=True\\); print\\(''OK''\\)\")",
      "Bash(\"./.venv/Scripts/python.exe\" -c \"\nfrom tools.question_generator import Measurement, generate_xml\n\n# Test without integrity\nm = Measurement\\(label=''vout'', property=''nodeVoltage'', target=3.3, tolerance=0.1, graded=True\\)\nxml = generate_xml\\(''Test'', ''Desc'', ''fakectz'', [m]\\)\nassert ''ans_integrity'' not in xml\nassert ''editableIndices'' not in xml\nassert ''expected_integrity'' not in xml\nprint\\(''No integrity: OK''\\)\n\n# Test with integrity\nxml = generate_xml\\(''Test'', ''Desc'', ''fakectz'', [m], editable_indices=[0, 2]\\)\nassert ''ans_integrity'' in xml\nassert ''editableIndices=0,2'' in xml\nassert ''expected_integrity'' in xml\nassert ''Integrity gate'' in xml\nassert ''AlgEquiv'' in xml\nassert ''restricted circuit components'' in xml\n# Should have 3 test cases\nassert ''Integrity failure'' in xml\nprint\\(''With integrity: OK''\\)\n\n# Test multiple graded measurements with integrity\nm2 = Measurement\\(label=''R1'', property=''current'', target=0.005, tolerance=0.001, graded=True\\)\nxml = generate_xml\\(''Test2'', ''Desc'', ''fakectz'', [m, m2], editable_indices=[1]\\)\nassert ''prt1'' in xml\nassert ''prt2'' in xml\nassert ''ans1'' in xml\nassert ''ans2'' in xml\nassert ''ans_integrity'' in xml\n# Each PRT should have integrity gate\nassert xml.count\\(''Integrity gate''\\) == 2\nprint\\(''Multi-measurement with integrity: OK''\\)\n\nprint\\(''All tests passed!''\\)\n\")",
      "Bash(\"./.venv/Scripts/python.exe\":*)",
      "Bash(\"./.venv/Scripts/python.exe\" -c \"import py_compile; py_compile.compile\\(''tools/question_generator.py'', doraise=True\\); print\\(''Syntax OK''\\)\")"
    ]
  }
}
